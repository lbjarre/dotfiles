format = """\
$username\
$directory\
${custom.jj}\
$git_branch\
$git_commit\
$git_state\
$git_metrics\
$git_status\
$aws\
$jobs\
$cmd_duration\
$line_break\
$character"""

[directory]
truncation_length = 3
truncate_to_repo = true
fish_style_pwd_dir_length = 1

[jobs]
symbol = "+ "

[aws]
format = "[$symbol$profile]($style) "
style = "bold yellow"

[custom.jj]
description = "The current state of a Jujutsu repository."
when = "jj --ignore-working-copy root"
symbol = "üê¶"
format = '$symbol $output '
command = '''
jj log --ignore-working-copy --revisions @ --limit 1 --no-graph --color always --template '
    separate(" ",
        change_id.shortest(4),
        if(empty, "(empty)"),
        separate("|",
            if(conflict, "C"),
            if(divergent, "D"),
            if(hidden, "H"),
        ),
    )
'
'''
